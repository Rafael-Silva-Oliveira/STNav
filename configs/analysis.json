{
  "saving_path": "\\OneDrive - NTNU\\Documents\\Projects\\STNav\\data\\processed",
  "scRNA": {
    "usage": true,
    "path": "C:\\Users\\rafaelo\\OneDrive - NTNU\\Documents\\Projects\\STNav\\data\\processed\\Keep\\PipelineRun_2024_02_23-09_22_35_AM\\scRNA\\Files\\scRNA_raw_adata.h5ad",
    "cell_annotation": {
      "scArches_surgery": {
        "usage": false,
        "path_backbone": "C:\\Users\\rafaelo\\OneDrive - NTNU\\Documents\\Projects\\STNav\\data\\external\\HCLA",
        "path_query_data": "HLCA_query.h5ad",
        "adata_query_batch": "Delorey_batch_1",
        "path_reference": "HLCA_emb_and_metadata.h5ad",
        "path_cell_types": "HLCA_celltypes_ordered.csv",
        "ensembleID_to_GeneSym_mapping": {
          "usage": false,
          "gene_mapping_path": ""
        },
        "train": false,
        "ref_model_dir": "HLCA_reference_model",
        "ref_model_features": "HLCA_reference_model/var_names.csv",
        "surgery_model_dir": "HCLA",
        "surgery_params": {
          "epochs": 500,
          "early_stopping_monitor": "elbo_train",
          "early_stopping_patience": 10,
          "early_stopping_min_delta": 0.001,
          "plan_kwargs": { "weight_decay": 0.0 }
        },
        "label_transfer": {
          "uncertainty_threshold": 0.2
        }
      },
      "celltypist_surgery": {
        "usage": false,
        "path_backbone": "C:\\Users\\rafaelo\\OneDrive - NTNU\\Documents\\Projects\\DAIgnostics\\dAIgnostics\\data\\external\\HCLA\\",
        "surgery_type": {
          "transfer_from_reference": {
            "usage": false,
            "path_query_data": "HLCA_query.h5ad",
            "adata_query_batch": "Delorey_batch_1",
            "path_reference": "HLCA_emb_and_metadata.h5ad",
            "path_cell_types": "HLCA_celltypes_ordered.csv",
            "train": false,
            "params": {
              "epochs": 500,
              "early_stopping_monitor": "elbo_train",
              "early_stopping_patience": 10,
              "early_stopping_min_delta": 0.001,
              "plan_kwargs": { "weight_decay": 0.0 }
            }
          },
          "single_label": { "usage": false },
          "multi_label": { "usage": true }
        },
        "ensembleID_to_GeneSym_mapping": {
          "usage": false,
          "gene_mapping_path": ""
        },
        "ref_model_dir": "HLCA_reference_model",
        "ref_model_features": "HLCA_reference_model/var_names.csv",
        "surgery_model_dir": "HCLA"
      }
    },
    "quality_control": {
      "calculate_qc_metrics": {
        "func_str": "sc.pp.calculate_qc_metrics",
        "usage": true,
        "params": {
          "adata": "adata",
          "qc_vars": ["Mt", "Ribo", "Hb"],
          "percent_top": null,
          "log1p": false,
          "inplace": true
        },
        "pct_counts_Mt": 25,
        "n_genes_by_counts": {
          "quantile": {
            "usage": true,
            "upper_quantile": 0.98,
            "lower_quantile": 0.02
          },
          "manual_interval": {
            "usage": false,
            "upper_bound": null,
            "lower_bound": null
          }
        }
      },
      "print_mt": false
    },
    "preprocessing": {
      "adata_to_use": "QCed_adata",
      "unnormalize": {
        "usage": false,
        "col_name": "n_counts"
      },
      "normalize": {
        "func_str": "sc.pp.normalize_total",
        "usage": true,
        "params": {
          "adata": "adata",
          "target_sum": 1e6,
          "inplace": true
        }
      },
      "log1p": {
        "func_str": "sc.pp.log1p",
        "usage": true,
        "params": {
          "X": "adata"
        }
      },
      "scale": {
        "func_str": "sc.pp.scale",
        "usage": false,
        "params": {
          "X": "adata",
          "max_value": null
        }
      },
      "filter_genes": {
        "func_str": "sc.pp.filter_genes",
        "usage": true,
        "params": {
          "data": "adata",
          "min_counts": 25,
          "inplace": true
        }
      },
      "filter_cells": {
        "func_str": "sc.pp.filter_cells",
        "usage": false,
        "params": {
          "data": "adata",
          "min_genes": 200
        }
      },
      "highly_variable_genes": {
        "usage": true,
        "func_str": "sc.pp.highly_variable_genes",
        "params": {
          "adata": "adata",
          "subset": true,
          "n_top_genes": 5000,
          "min_mean": 0.0125,
          "max_mean": 2,
          "min_disp": 0.25,
          "flavor": "seurat",
          "inplace": true
        }
      },
      "plotting_prep": {
        "pca": {
          "usage": true,
          "func_str": "sc.tl.pca",
          "params": { "data": "adata", "svd_solver": "arpack" }
        },
        "neighbors": {
          "usage": true,
          "func_str": "sc.pp.neighbors",
          "params": { "adata": "adata", "n_pcs": 30, "n_neighbors": 20 }
        },
        "umap": {
          "usage": true,
          "func_str": "sc.tl.umap",
          "params": { "adata": "adata" }
        },
        "tsne": {
          "usage": true,
          "func_str": "sc.tl.tsne",
          "params": { "adata": "adata", "n_pcs": 30 }
        },
        "leiden": {
          "usage": true,
          "func_str": "sc.tl.leiden",
          "params": {
            "adata": "adata",
            "key_added": "leiden_clusters",
            "resolution": 0.75
          }
        },
        "louvain": {
          "usage": false,
          "func_str": "sc.tl.louvain",
          "params": { "adata": "adata", "key_added": "louvain_clusters" }
        },
        "hclust": {
          "usage": true,
          "func_str": "AgglomerativeClustering",
          "params": {
            "n_clusters": 7,
            "affinity": "euclidean",
            "linkage": "ward"
          }
        }
      }
    },
    "DEG": {
      "adata_to_use": "preprocessed_adata",
      "rank_genes_groups": {
        "usage": true,
        "func_str": "sc.tl.rank_genes_groups",
        "params": {
          "adata": "adata",
          "groupby": "ann_level_3_transferred_label",
          "groups": "all",
          "reference": "rest",
          "method": "wilcoxon",
          "key_added": "wilcoxon",
          "layer": null,
          "n_genes": 5000,
          "use_raw": false
        }
      },
      "filter_rank_genes_groups": {
        "usage": false,
        "func_str": "sc.tl.filter_rank_genes_groups",
        "params": {
          "adata": "adata",
          "min_fold_change": 1
        }
      },
      "rank_genes_groups_df": {
        "usage": true,
        "func_str": "sc.get.rank_genes_groups_df",
        "params": {
          "adata": "adata",
          "key": "wilcoxon",
          "pval_cutoff": 0.05,
          "log2fc_min": null,
          "group": null
        }
      },
      "GSEA": {
        "usage": false,
        "stratify_by_group": false,
        "gene_sets": {
          "api_sets": {
            "usage": true,
            "sets": {
              "DisGeNET": true,
              "GO_Biological_Process_2023": true,
              "KEGG_2021_Human": true
            }
          },
          "manual_sets": {
            "usage": false,
            "sets": {
              "Negative Radiation Sensitivity": {
                "AR": { "rank": 10 },
                "PRKCB": { "rank": 7 },
                "RELA": { "rank": 6 },
                "SUMO1": { "rank": 4 },
                "PAK2": { "rank": 3 },
                "IRF1": { "rank": 1 },
                "HDAC1": { "rank": 2 }
              },
              "Positive Radiation Sensitivity": {
                "JUN": { "rank": 9 },
                "STAT1": { "rank": 8 },
                "ABL1": { "rank": 5 }
              }
            }
          }
        },
        "enrichr": {
          "func_str": "gp.enrichr",
          "usage": true,
          "params": {
            "cutoff": 0.05
          }
        },
        "prerank": {
          "func_str": "gp.prerank",
          "usage": true,
          "params": {
            "rnk": "adata",
            "min_size": 1,
            "max_size": 1000,
            "permutation_num": 1000,
            "weighted_score_type": 1.0,
            "ascending": false,
            "threads": 4,
            "format": "pdf",
            "graph_num": 20,
            "no_plot": false,
            "seed": 123,
            "verbose": true
          }
        },
        "gsea": {
          "func_str": "gp.gsea",
          "usage": false,
          "adata_cls_col_name": null,
          "params": {
            "data": "adata",
            "permutation_type": "phenotype",
            "permutation_num": 1000,
            "method": "s2n",
            "seed": 123,
            "threads": 4
          }
        }
      }
    },
    "model": {
      "model_type": {
        "CondSCVI": {
          "train": false,
          "usage": false,
          "adata_to_use": "preprocessed_adata",
          "layer": "raw_counts",
          "params": {
            "max_epochs": 500,
            "early_stopping": true
          }
        },
        "RNAStereoscope": {
          "train": false,
          "usage": false,
          "adata_to_use": "preprocessed_adata",
          "layer": "raw_counts",
          "params": {
            "max_epochs": 500,
            "early_stopping": true
          }
        }
      },
      "pre_trained_model_path": "C:/Users/rafaelo/OneDrive - NTNU/Documents/Projects/DAIgnostics/scmodel"
    }
  },
  "ST": {
    "usage": true,
    "path": "C:\\Users\\rafaelo\\OneDrive - NTNU\\Documents\\Projects\\STNav\\data\\external",
    "count_file": "CytAssist_FFPE_Human_Lung_Squamous_Cell_Carcinoma_filtered_feature_bc_matrix.h5",
    "load_images": true,
    "source_image_path": "C:\\Users\\rafaelo\\OneDrive - NTNU\\Documents\\Projects\\STNav\\data\\external\\spatial",
    "quality_control": {
      "calculate_qc_metrics": {
        "func_str": "sc.pp.calculate_qc_metrics",
        "usage": true,
        "params": {
          "adata": "adata",
          "qc_vars": ["Mt", "Ribo", "Hb"],
          "percent_top": null,
          "log1p": false,
          "inplace": true
        },
        "pct_counts_Mt": 25,
        "n_genes_by_counts": {
          "quantile": {
            "usage": true,
            "upper_quantile": 0.98,
            "lower_quantile": 0.02
          },
          "manual_interval": {
            "usage": false,
            "upper_bound": null,
            "lower_bound": null
          }
        }
      },
      "print_mt": false
    },
    "preprocessing": {
      "adata_to_use": "QCed_adata",
      "unnormalize": {
        "usage": false,
        "col_name": "total_counts"
      },
      "normalize": {
        "func_str": "sc.pp.normalize_total",
        "usage": true,
        "params": {
          "adata": "adata",
          "target_sum": 1e4,
          "inplace": true
        }
      },
      "log1p": {
        "func_str": "sc.pp.log1p",
        "usage": true,
        "params": {
          "X": "adata"
        }
      },
      "scale": {
        "func_str": "sc.pp.scale",
        "usage": false,
        "params": {
          "X": "adata",
          "max_value": null
        }
      },
      "filter_genes": {
        "func_str": "sc.pp.filter_genes",
        "usage": true,
        "params": {
          "data": "adata",
          "min_counts": 25,
          "min_cells": null
        }
      },
      "filter_cells": {
        "func_str": "sc.pp.filter_cells",
        "usage": false,
        "params": {
          "data": "adata",
          "min_genes": 200
        }
      },
      "highly_variable_genes": {
        "usage": true,
        "func_str": "sc.pp.highly_variable_genes",
        "params": {
          "adata": "adata",
          "subset": true,
          "n_top_genes": 5000,
          "min_mean": 0.0125,
          "max_mean": 3,
          "min_disp": 0.5,
          "flavor": "seurat",
          "inplace": true
        }
      },
      "plotting_prep": {
        "pca": {
          "usage": true,
          "func_str": "sc.tl.pca",
          "params": { "data": "adata", "svd_solver": "arpack" }
        },
        "neighbors": {
          "usage": true,
          "func_str": "sc.pp.neighbors",
          "params": { "adata": "adata", "n_pcs": 30, "n_neighbors": 20 }
        },
        "umap": {
          "usage": true,
          "func_str": "sc.tl.umap",
          "params": { "adata": "adata" }
        },
        "tsne": {
          "usage": true,
          "func_str": "sc.tl.tsne",
          "params": { "adata": "adata", "n_pcs": 30 }
        },
        "leiden": {
          "usage": true,
          "func_str": "sc.tl.leiden",
          "params": {
            "adata": "adata",
            "key_added": "leiden_clusters",
            "resolution": 0.75
          }
        },
        "louvain": {
          "usage": false,
          "func_str": "sc.tl.louvain",
          "params": { "adata": "adata", "key_added": "louvain_clusters" }
        },
        "hclust": {
          "usage": true,
          "func_str": "AgglomerativeClustering",
          "params": {
            "n_clusters": 7,
            "affinity": "euclidean",
            "linkage": "ward"
          }
        }
      }
    },
    "DEG": {
      "adata_to_use": "preprocessed_adata",
      "rank_genes_groups": {
        "usage": true,
        "func_str": "sc.tl.rank_genes_groups",
        "params": {
          "adata": "adata",
          "groupby": "leiden_clusters",
          "groups": "all",
          "reference": "rest",
          "method": "wilcoxon",
          "key_added": "wilcoxon",
          "layer": null,
          "n_genes": 12000,
          "use_raw": false
        }
      },
      "filter_rank_genes_groups": {
        "usage": false,
        "func_str": "sc.tl.filter_rank_genes_groups",
        "params": {
          "adata": "adata",
          "min_fold_change": 1
        }
      },
      "rank_genes_groups_df": {
        "usage": true,
        "func_str": "sc.get.rank_genes_groups_df",
        "params": {
          "adata": "adata",
          "key": "wilcoxon",
          "pval_cutoff": 0.05,
          "log2fc_min": null,
          "group": null
        }
      },
      "GSEA": {
        "usage": false,
        "stratify_by_group": true,
        "gene_sets": {
          "api_sets": {
            "usage": true,
            "sets": {
              "DisGeNET": true,
              "GO_Biological_Process_2023": true,
              "KEGG_2021_Human": true
            }
          },
          "manual_sets": {
            "usage": true,
            "sets": {
              "Negative Radiation Sensitivity (RS)": {
                "AR": { "rank": 10 },
                "PRKCB": { "rank": 7 },
                "RELA": { "rank": 6 },
                "SUMO1": { "rank": 4 },
                "PAK2": { "rank": 3 },
                "IRF1": { "rank": 1 },
                "HDAC1": { "rank": 2 }
              },
              "Positive Radiation Sensitivity (RR)": {
                "JUN": { "rank": 9 },
                "STAT1": { "rank": 8 },
                "ABL1": { "rank": 5 }
              }
            }
          }
        },
        "enrichr": {
          "func_str": "gp.enrichr",
          "usage": true,
          "params": {
            "cutoff": 0.05
          }
        },
        "prerank": {
          "func_str": "gp.prerank",
          "usage": true,
          "params": {
            "rnk": "adata",
            "min_size": 1,
            "max_size": 1000,
            "permutation_num": 1000,
            "weighted_score_type": 1.0,
            "ascending": false,
            "threads": 4,
            "format": "pdf",
            "graph_num": 20,
            "no_plot": false,
            "seed": 123,
            "verbose": true
          }
        },
        "gsea": {
          "func_str": "gp.gsea",
          "adata_cls_col_name": null,
          "usage": false,
          "params": {
            "data": "adata",
            "permutation_type": "phenotype",
            "permutation_num": 1000,
            "method": "s2n",
            "seed": 123,
            "threads": 4
          }
        }
      }
    },
    "model": {
      "model_type": {
        "DestVI": {
          "train": false,
          "usage": false,
          "adata_to_use": "preprocessed_adata",
          "layer": "raw_counts",
          "params": {
            "max_epochs": 500,
            "early_stopping": true
          }
        },
        "SpatialStereoscope": {
          "train": false,
          "usage": false,
          "adata_to_use": "preprocessed_adata",
          "layer": "raw_counts",
          "params": {
            "max_epochs": 500,
            "early_stopping": true
          }
        },
        "GraphST": {
          "usage": true,
          "train": true,
          "adata_to_use": "preprocessed_adata",
          "layer": "raw_counts",
          "params": {
            "epochs": 1200,
            "random_seed": 50,
            "deconvolution": true
          }
        }
      },
      "pre_trained_model_path": "C:/Users/rafaelo/OneDrive - NTNU/Documents/Projects/DAIgnostics/stmodel"
    },
    "SpatialNeighbors": {
      "Squidpy": {
        "NHoodEnrichment": {
          "usage": true,
          "adata_to_use": "preprocessed_adata",
          "func_str": "sq.gr.nhood_enrichment",
          "data_type": "ST",
          "params": {
            "adata": "adata",
            "cluster_key": "leiden_clusters"
          }
        },
        "Co_Ocurrence": {
          "usage": true,
          "adata_to_use": "preprocessed_adata",
          "func_str": "sq.gr.co_occurrence",
          "data_type": "ST",
          "params": {
            "adata": "adata",
            "cluster_key": "leiden_clusters"
          }
        }
      }
    },
    "SpatiallyVariableGenes": {
      "SpatialDE": {
        "config_1": {
          "usage": false,
          "adata_to_use": "preprocessed_adata",
          "data_type": "ST",
          "params": {
            "x_coord_name": "array_row",
            "y_coord_name": "array_col"
          },
          "AEH": {
            "usage": false,
            "params": {
              "C": 3,
              "l": 1.5
            }
          }
        },
        "config_2": {
          "usage": false,
          "data_type": "ST",
          "params": {
            "x_coord_name": "array_row",
            "y_coord_name": "array_col",
            "counts": "total_counts"
          },
          "AEH": {
            "usage": false,
            "params": {
              "C": 3,
              "l": 1.5
            }
          }
        }
      },
      "Squidpy_MoranI": {
        "Squidpy_MoranI": {
          "usage": true,
          "adata_to_use": "preprocessed_adata",
          "func_str": "sq.gr.spatial_autocorr",
          "data_type": "ST",
          "n_genes": 1000,
          "params": {
            "adata": "adata",
            "mode": "moran",
            "n_perms": 1000,
            "n_jobs": 1
          }
        }
      },
      "Squidpy_Speal": {}
    },
    "ReceptorLigandAnalysis": {
      "Squidpy": {
        "ligrec": {
          "usage": true,
          "adata_to_use": "preprocessed_adata",
          "func_str": "sq.gr.ligrec",
          "data_type": "ST",
          "params": {
            "adata": "adata",
            "n_perms": 1000,
            "cluster_key": "leiden_clusters",
            "copy": true,
            "use_raw": false,
            "transmitter_params": { "categories": "ligand" },
            "receiver_params": { "categories": "receptor" },
            "key_added": "ligrec"
          }
        }
      },
      "SpatialDM": {
        "SpatialDM_LigRec": {
          "usage": true,
          "adata_to_use": "deconvoluted_adata",
          "func_str": "SpatialDM_wrapper",
          "data_type": "ST",
          "params": {
            "adata": "adata",
            "l": 1.2,
            "cutoff": 0.2,
            "single_cell": false,
            "species": "human",
            "min_cell": 3,
            "n_perm": 1000,
            "specified_ind_global": null,
            "method_global": "both",
            "specified_ind_local": null,
            "method_local": "both",
            "nproc": 1,
            "method_sig_pairs": "permutation",
            "fdr_sig_pairs": true,
            "threshold_sig_pairs": 0.1,
            "method_sig_spots": "permutation",
            "fdr_sig_spots": false,
            "threshold_sig_spots": 0.1
          }
        }
      },
      "stLearn": {
        "stLearn_cci": {
          "usage": true,
          "adata_to_use": "deconvoluted_adata",
          "func_str": "stLearn_wrapper",
          "data_type": "ST",
          "params": {
            "adata": "adata",
            "min_spots": 20,
            "distance": null,
            "n_pairs": 10000,
            "spot_mixtures": false,
            "sig_spots": true,
            "cell_prop_cutoff": 0.2,
            "p_cutoff": 0.05,
            "n_perms": 1000,
            "n_cpus": null,
            "verbose": true
          }
        }
      }
    }
  }
}
